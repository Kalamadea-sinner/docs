# solarisBank Digital Assets Platform API

## api-client

In this folder you will find `api-client` -- an example CLI application that can generate API keys and talk to the API.


### Installation

To use the `api-client` you should have a working Ruby installation.

To install all the project dependencies do:

```
cd <this folder>
bundle
```

Upon completion, you will have a working `api-client`, which you can test by running:

```
./api-client help

Commands:
  api-client config            # Display currently used configuration
  api-client generate_key      # Generate a new API key pair
  api-client get PATH          # Send a GET request
  api-client help [COMMAND]    # Describe available commands or one specific command
  api-client post PATH [BODY]  # Send a POST request

```

### Configuration

The `api-client` CLI tool uses configuration stored in a local file `api-client.yml`. An example of this configuration file is provided in `api-client.yml.example`:

```yaml
api_url: https://api.sb-cryptocustody-sandbox.aws.solarisbank.io
api_key:
  id: 42d3d5260710fe195bf9c2dfd2d38917akey
  seed: f795b212026beba7fb43d0568834b5067829b9ba630cd0cef29e96897f66087d
```

## API Key generation

The `api-client` CLI tool can be used to generate API Key pairs using `generate_key` comand:

```
api-client generate_key

Generating a new API key pair
   seed: a3e503936cd71da7e4450a3fe4c22e227a86fc6ea888fdecf09fcfb7c09cc2e8
pub_key: 7ccd8e2d736d401954d956b97db8c16a35c9dba1e26ca51bb7cb294ea05dc5c5
```

The API Key pair generated by the `api-client` is a key pair for the Ed25519 digital signature algorithm, where:

* `seed` is a 32 byte hexadecimal representation of the Ed25519 key seed (NOTE: it is NOT the 64 byte private/signing key)
* `pub_key` is a 32 byte hexadecimal representation of the Ed25519 public key

The seed and the corresponding public key can be generated using any other implementation of Ed25519 algorithm.

Before the API Key can be used to execute HTTP requests to the API, the corresponding public key must be registered at the Platform.

[TODO: Description of pub key registration process]

As a result, the ID will be assigned to this API Key by the Platform. The `id` and `seed` values must then be put into `api-client.yml` configuration file.


## Executing HTTP requests to the API

Once configured with the API Key registered at the Platform, `api-client` can be used to talk to the API:

```
api-client get /v1/assets

> GET /v1/assets
< 200 OK
{
  "items": [
    {
      "id": "00000000000000000000000000000001asst",
      "code": "BTC",
      "description": "Bitcoin",
      "precision": 8,
      "created_at": "2019-06-04T10:51:37Z",
      "updated_at": "2019-06-04T10:51:37Z"
    },
    {
      "id": "00000000000000000000000000000002asst",
      "code": "ETH",
      "description": "Ethereum",
      "precision": 18,
      "created_at": "2019-06-04T10:51:37Z",
      "updated_at": "2019-06-04T10:51:37Z"
    }
  ]
}
```

---
